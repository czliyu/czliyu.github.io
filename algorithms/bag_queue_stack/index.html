
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="">
  <head>
    <meta charset="utf-8" />
    <title>背包、队列和栈 &#8212; 胖虎的技术栈  documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="author" title="About these documents" href="../../about/" />
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
  
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  
  
  <style type="text/css">
    ul.ablog-archive {list-style: none; overflow: auto; margin-left: 0px}
    ul.ablog-archive li {float: left; margin-right: 5px; font-size: 80%}
    ul.postlist a {font-style: italic;}
    ul.postlist-style-disc {list-style-type: disc;}
    ul.postlist-style-none {list-style-type: none;}
    ul.postlist-style-circle {list-style-type: circle;}
  </style>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>背包、队列和栈<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>许多数据类型都和对象的集合有关，所有的操作都关于添加，删除或访问集合中的对象
这三种数据类型，分别是背包（Bag）、队列（Queue）和栈（Stack）</p>
</div>
<ul class="simple">
<li><p>目标1：说明我们对集合中的对象的表示方式将直接影响各种操作的效率，对于集合来说
，我们将设计适用于表示一组对象的数据结构并高效地实现所需方法。</p></li>
<li><p>目标2：<strong>泛型</strong> 和迭代，它们都是简单的java概念，能极大地简化用例代码，是高级的编程
语言机制，有了它们我们能够写出更加清晰、简单和优美的用例代码。</p></li>
<li><p>目标3：链式数据结构的重要性，特别是经典数据结构链表，理解链表是学习各种算法和数据结构
中最关键的第一步</p></li>
</ul>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>背包（Bag）</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bag</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
             <span class="nf">Bag</span><span class="o">()</span>                        <span class="n">构造一个空背包</span>
       <span class="kt">void</span>  <span class="nf">add</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>               <span class="n">添加一个元素</span>
    <span class="kt">boolean</span>  <span class="nf">isEmpty</span><span class="o">()</span>                    <span class="n">背包是否为空</span>
        <span class="kt">int</span>  <span class="nf">size</span><span class="o">()</span>                       <span class="n">背包中的元素数量</span>
</pre></div>
</div>
<p>先进先出（FIFO）队列</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Queue</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
             <span class="nf">Queue</span><span class="o">()</span>                      <span class="n">创建空队列</span>
       <span class="kt">void</span>  <span class="nf">enqueue</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>           <span class="n">添加一个元素</span>
       <span class="n">Item</span>  <span class="nf">dequeue</span><span class="o">()</span>                    <span class="n">删除最早添加的元素</span>
    <span class="kt">boolean</span>  <span class="nf">isEmpty</span><span class="o">()</span>                    <span class="n">队列是否为空</span>
        <span class="kt">int</span>  <span class="nf">size</span><span class="o">()</span>                       <span class="n">队列中的元素数量</span>
</pre></div>
</div>
<p>下压（后进先出,LIFO）栈</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stack</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
             <span class="nf">Stack</span><span class="o">()</span>                      <span class="n">创建一个空栈</span>
       <span class="kt">void</span>  <span class="nf">push</span><span class="o">(</span><span class="n">Item</span> <span class="n">iten</span><span class="o">)</span>              <span class="n">添加一个元素</span>
       <span class="n">Item</span>  <span class="nf">pop</span><span class="o">()</span>                        <span class="n">删除最近添加的元素</span>
    <span class="kt">boolean</span>  <span class="nf">isEmpty</span><span class="o">()</span>                    <span class="n">栈是否为空</span>
        <span class="kt">int</span>  <span class="nf">size</span><span class="o">()</span>                       <span class="n">栈中的元素数量</span>
</pre></div>
</div>
<p><strong>泛型</strong></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>集合类的抽象数据类型的一个关键特性是我们应该用它们存储任意类型的数据。这种数据类型
被称为 <code class="docutils literal notranslate"><span class="pre">泛型</span></code> ,也叫做参数化类型, <em>&lt;Item&gt;</em> 记号将 <code class="docutils literal notranslate"><span class="pre">Item</span></code> 定义为一个类型参数。
<strong>泛型编程很重要</strong></p>
</div>
<p>可以编写如下代码来用栈处理 <code class="docutils literal notranslate"><span class="pre">String</span></code> 对象:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">stack</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">stack</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s1">&#39;Test&#39;</span><span class="p">);</span>
<span class="o">...</span>
<span class="n">String</span> <span class="nb">next</span> <span class="o">=</span> <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>有了范型，我们只需要一份API（一份实现）就能够处理所有类型的数据。</p>
</div>
<p><strong>自动装箱</strong></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>类型参数必须被实例化为 <em>引用类型</em>, java会自动在引用类型和对应的原始数据类型之间的转换。
这种转换有助于同时使用泛型和原始数据类型。</p>
</div>
<p>用例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;();
stack.push(17);      // 自动装箱，int -&gt; Integer
int i = stack.pop(); // 自动拆箱 Integer -&gt; int
</pre></div>
</div>
<p>自动将一个原始数据类型转换为一个封装类型被称为 <code class="docutils literal notranslate"><span class="pre">自动装箱</span></code>
java在将它赋予变量i之前将它的类型自动转换（自动拆箱）为int</p>
</div>
<div class="section" id="id2">
<h2>背包<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><strong>背包</strong> 是一种不支持从中删除元素的集合数据类型。</p>
</div>
<p>样本标准差为每个值和平均值之差的平方之和除以N-1之后的平方根</p>
<p>背包典型用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Stats</span>
<span class="o">{</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
     <span class="o">{</span>
         <span class="n">Bag</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bag</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;();</span>

         <span class="k">while</span> <span class="o">(!</span><span class="n">StdIn</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
             <span class="n">numbers</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">StdIn</span><span class="o">.</span><span class="na">readDouble</span><span class="o">());</span>
         <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="na">size</span><span class="o">();</span>

         <span class="kt">double</span> <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>
         <span class="k">for</span> <span class="o">(</span><span class="kt">double</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span>
             <span class="n">sum</span> <span class="o">+=</span> <span class="n">x</span><span class="o">;</span>
         <span class="kt">double</span> <span class="n">mean</span> <span class="o">=</span> <span class="n">sum</span><span class="o">/</span><span class="n">N</span><span class="o">;</span>

         <span class="n">sum</span> <span class="o">=</span> <span class="mf">0.0</span><span class="o">;</span>

         <span class="k">for</span> <span class="o">(</span><span class="kt">double</span> <span class="n">x</span> <span class="o">:</span> <span class="n">numbers</span><span class="o">)</span>
             <span class="n">sum</span> <span class="o">+=</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">mean</span><span class="o">);</span>

         <span class="kt">double</span> <span class="n">std</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">sum</span><span class="o">/(</span><span class="n">N</span><span class="o">-</span><span class="mi">1</span><span class="o">));</span>

         <span class="n">StdOut</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;Mean: %.2f\n&quot;</span><span class="o">,</span> <span class="n">mean</span><span class="o">);</span>
         <span class="n">StdOut</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;Std dev: %.2f\n&quot;</span><span class="o">,</span> <span class="n">std</span><span class="o">);</span>
     <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>先进先出队列<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>先进先出队列（简称队列）是一种基于先进先出（FIFO）策略的集合类型。</p>
</div>
<p>在应用程序中使用队列的主要原因是在应用集合保存元素的同时保存它们的相对顺序，使它们入列顺序和出列顺序相同。</p>
<p>队列典型用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">readInts</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span>
<span class="o">{</span>
     <span class="n">In</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">In</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
     <span class="n">Queue</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Queue</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>
     <span class="k">while</span> <span class="o">(!</span><span class="n">in</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
         <span class="n">q</span><span class="o">.</span><span class="na">enqueue</span><span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">readInt</span><span class="o">());</span>
     <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">size</span><span class="o">;</span>
     <span class="kt">int</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Int</span><span class="o">[</span><span class="n">N</span><span class="o">];</span>
     <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
         <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">dequeue</span><span class="o">();</span>
     <span class="k">return</span> <span class="n">a</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>下压栈<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>下压栈（简称栈）是一种基于后进先出（LIFO）策略的集合类型。</p>
</div>
<p>元素的处理顺序和它们被压入的顺序相反。</p>
<p>Stack 用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">function</span> <span class="n">Reverse</span>
<span class="o">{</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
     <span class="o">{</span>
         <span class="n">Stack</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">stack</span><span class="o">;</span>
         <span class="n">stack</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;();</span>

         <span class="k">while</span> <span class="o">(!</span><span class="n">StdIn</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
             <span class="n">stack</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">StdIn</span><span class="o">.</span><span class="na">readInt</span><span class="o">());</span>
         <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">stack</span><span class="o">)</span>
             <span class="n">StdOut</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
     <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2>泛型<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixedCapacityStackOfStrings</span>
             <span class="nf">FixedCapacityStackOfStrings</span><span class="o">(</span><span class="kt">int</span> <span class="n">cap</span><span class="o">)</span>      <span class="n">创建一个容器为cap的空栈</span>
       <span class="kt">void</span>  <span class="nf">push</span><span class="o">(</span><span class="n">String</span> <span class="n">item</span><span class="o">)</span>                         <span class="n">添加一个字符串</span>
     <span class="n">String</span>  <span class="nf">pop</span><span class="o">()</span>                                     <span class="n">删除最近添加的字符串</span>
    <span class="kt">boolean</span>  <span class="nf">isEmpty</span><span class="o">()</span>                                 <span class="n">栈是否为空</span>
        <span class="kt">int</span>  <span class="nf">size</span><span class="o">()</span>                                    <span class="n">栈中的字符串数量</span>
</pre></div>
</div>
<p>数据类型实现</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixedCapacityStackOfStrings</span>
<span class="o">{</span>
     <span class="kd">private</span> <span class="n">String</span><span class="o">[]</span> <span class="n">a</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kt">int</span> <span class="n">N</span><span class="o">;</span>

     <span class="kd">public</span> <span class="nf">FixedCapacityStackOfStrings</span><span class="o">(</span><span class="kt">int</span> <span class="n">cap</span><span class="o">)</span>
     <span class="o">{</span> <span class="n">a</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">[</span><span class="n">cap</span><span class="o">];</span> <span class="o">}</span>

     <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span><span class="o">==</span><span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">String</span> <span class="n">item</span><span class="o">)</span>
     <span class="o">{</span> <span class="n">a</span><span class="o">[</span><span class="n">N</span><span class="o">++]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="n">String</span> <span class="nf">pop</span><span class="o">()</span>
     <span class="o">{</span> <span class="k">return</span> <span class="n">a</span><span class="o">[--</span><span class="n">N</span><span class="o">];</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>测试用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
<span class="o">{</span>
     <span class="n">FixedCapacityStackOfStrings</span> <span class="n">s</span><span class="o">;</span>
     <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixedCapacityStackOfStrings</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
     <span class="k">while</span> <span class="o">(!</span><span class="n">StdIn</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
     <span class="o">{</span>
         <span class="n">String</span> <span class="n">item</span> <span class="o">=</span> <span class="n">StdIn</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
         <span class="k">if</span> <span class="o">(!</span><span class="n">item</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">))</span>
             <span class="n">s</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
         <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">s</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="n">StdOut</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">pop</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
     <span class="o">}</span>
     <span class="n">StdOut</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; left on stack&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>使用:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">more</span> <span class="n">tobe</span><span class="o">.</span><span class="n">txt</span>
<span class="n">to</span> <span class="n">be</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">to</span> <span class="o">-</span> <span class="n">be</span> <span class="o">-</span> <span class="o">-</span> <span class="n">that</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="ow">is</span>
<span class="o">%</span> <span class="n">java</span> <span class="n">FixedCapacityStackOfStrings</span> <span class="o">&lt;</span> <span class="n">tobe</span><span class="o">.</span><span class="n">txt</span>
<span class="n">to</span> <span class="n">be</span> <span class="ow">not</span> <span class="n">that</span> <span class="ow">or</span> <span class="n">be</span> <span class="p">(</span><span class="mi">2</span> <span class="n">left</span> <span class="n">on</span> <span class="n">stack</span><span class="p">)</span>
</pre></div>
</div>
<p>完全理解这个实现，我们画一个栈实现轨迹:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">------------------------------------------------------</span>
 <span class="n">stdin</span>     <span class="n">stdout</span>    <span class="n">N</span>    <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>  <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>  <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="o">------------------------------------------------------</span>
                     <span class="mi">0</span>
  <span class="n">to</span>                 <span class="mi">1</span>    <span class="n">to</span>
  <span class="n">be</span>                 <span class="mi">2</span>    <span class="n">to</span>    <span class="n">be</span>
  <span class="ow">or</span>                 <span class="mi">3</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>
  <span class="ow">not</span>                <span class="mi">4</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="ow">not</span>
  <span class="n">to</span>                 <span class="mi">5</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="ow">not</span>   <span class="n">to</span>
  <span class="o">-</span>         <span class="n">to</span>       <span class="mi">4</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="ow">not</span>
  <span class="n">be</span>                 <span class="mi">5</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="ow">not</span>   <span class="n">be</span>
  <span class="o">-</span>         <span class="n">be</span>       <span class="mi">4</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="ow">not</span>
  <span class="o">-</span>         <span class="ow">not</span>      <span class="mi">3</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>
  <span class="n">that</span>               <span class="mi">4</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>    <span class="n">that</span>
  <span class="o">-</span>         <span class="n">that</span>     <span class="mi">3</span>    <span class="n">to</span>    <span class="n">be</span>    <span class="ow">or</span>
  <span class="o">-</span>         <span class="ow">or</span>       <span class="mi">2</span>    <span class="n">to</span>    <span class="n">be</span>
  <span class="o">-</span>         <span class="n">be</span>       <span class="mi">1</span>    <span class="n">to</span>
  <span class="ow">is</span>                 <span class="mi">2</span>    <span class="n">to</span>    <span class="ow">is</span>
<span class="o">------------------------------------------------------</span>
</pre></div>
</div>
<p>有些缺点限制了它的通用能力。</p>
</div>
<div class="section" id="id6">
<h2>泛型<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>FixedCapacityStackOfStrings的第一缺点是它只能处理String对象。
如何实现一个泛型的栈？
实现一个FixedCapacityStack类，我们把所有的FixedCapacityStackOfStrings中的所有String替换成Item 声明类 <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">class</span> <span class="pre">FixedCapacityStack&gt;Item&gt;</span></code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在FixedCapacityStack的构造函数中创建一个泛型的数组</p>
<p>a = new Item[cap];   ❌</p>
<p>创建泛型数组在java中是不被允许的</p>
<p>a = (Item()) new Object[cap];  ✅</p>
<p>类型转换</p>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixedCapacityStack</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
             <span class="nf">FixedCapacityStack</span><span class="o">(</span><span class="kt">int</span> <span class="n">cap</span><span class="o">)</span>         <span class="n">创建一个容量为cap的空栈</span>
       <span class="kt">void</span>  <span class="nf">push</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>                     <span class="n">添加一个元素</span>
       <span class="n">Item</span>  <span class="nf">pop</span><span class="o">()</span>                               <span class="n">删除最近添加的元素</span>
    <span class="kt">boolean</span>  <span class="nf">isEmpty</span><span class="o">()</span>                           <span class="n">栈是否为空</span>
        <span class="kt">int</span>  <span class="nf">size</span><span class="o">()</span>                              <span class="n">栈的元素数量</span>
</pre></div>
</div>
<p>数据类型的实现</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FixedCapacityStack</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
<span class="o">{</span>
     <span class="kd">private</span> <span class="n">Item</span><span class="o">[]</span> <span class="n">a</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kt">int</span> <span class="n">N</span><span class="o">;</span>
     <span class="kd">public</span> <span class="nf">FixedCapacityStack</span><span class="o">(</span><span class="kt">int</span> <span class="n">cap</span><span class="o">)</span>
     <span class="o">{</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">Item</span><span class="o">[])</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">cap</span><span class="o">];</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>
     <span class="o">{</span> <span class="n">a</span><span class="o">[</span><span class="n">N</span><span class="o">++]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="n">Item</span> <span class="nf">pop</span><span class="o">()</span>
     <span class="o">{</span> <span class="k">return</span> <span class="n">a</span><span class="o">[--</span><span class="n">N</span><span class="o">];</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>测试用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span>
<span class="o">{</span>
     <span class="n">FixedCapacityStack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">s</span><span class="o">;</span>
     <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FixedCapacityStack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;(</span><span class="mi">100</span><span class="o">);</span>
     <span class="k">while</span> <span class="o">(!</span><span class="n">StdIn</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()){</span>
         <span class="n">String</span> <span class="n">item</span> <span class="o">=</span> <span class="n">StdIn</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
         <span class="k">if</span> <span class="o">(!</span><span class="n">item</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;-&quot;</span><span class="o">))</span>
             <span class="n">s</span><span class="o">.</span><span class="na">push</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
         <span class="k">else</span> <span class="k">if</span> <span class="o">(!</span><span class="n">s</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="n">StdOut</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">pop</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">);</span>
     <span class="o">}</span>
     <span class="n">StdOut</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">&quot; left on stack)&quot;</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>使用方法:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">more</span> <span class="n">tobe</span><span class="o">.</span><span class="n">txt</span>
<span class="n">to</span> <span class="n">be</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">to</span> <span class="o">-</span> <span class="n">be</span> <span class="o">-</span> <span class="o">-</span> <span class="n">that</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="ow">is</span>
<span class="o">%</span> <span class="n">java</span> <span class="n">FixedCapacityStack</span> <span class="o">&lt;</span> <span class="n">tebe</span><span class="o">.</span><span class="n">txt</span>
<span class="n">to</span> <span class="n">be</span> <span class="ow">not</span> <span class="n">that</span> <span class="ow">or</span> <span class="n">be</span> <span class="p">(</span><span class="mi">2</span> <span class="n">left</span> <span class="n">on</span> <span class="n">stack</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>调整数组大小<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>选择用数组表示栈的内容意味着用例必须预先估计栈的最大容量。在java中，数组一旦被创建其大小是无法改变的。</p>
<p>因此栈使用的空间只能是这个最大容量的一部分，选择大容量的用例在栈为空或几乎为空时会浪费大量内存。</p>
<p>比如：一个交易系统可能会涉及数十亿笔交易和数千个交易集合。即使这种系统一般会限制每笔交易只能出现在一个集合中，但用例必须
保证所有集合都有能力保存所有的交易，另一方面，如果集合变得比数组更大那么用例有可能溢出。</p>
<p>实现一个方法将栈移动到另一个大小不同的数组中</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kt">void</span> <span class="nf">resize</span><span class="o">(</span><span class="kt">int</span> <span class="n">max</span><span class="o">)</span>
<span class="o">{</span>
     <span class="c1">// 将大小为N &lt;= max 的栈移动到一个新的大小为max的数组中</span>
     <span class="n">Item</span><span class="o">[]</span> <span class="n">temp</span> <span class="o">=</span> <span class="o">(</span><span class="n">Item</span><span class="o">[])</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">max</span><span class="o">];</span>
     <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
         <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
     <span class="n">a</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>修改push方法，检查数组是否太小</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>
<span class="o">{</span>
     <span class="k">if</span> <span class="o">(</span><span class="n">N</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="n">resize</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
     <span class="n">a</span><span class="o">[</span><span class="n">N</span><span class="o">++]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>修改pop方法，如果数组太大将它长度减半, 栈大小是否小于数组的1/4</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">Item</span> <span class="nf">pop</span><span class="o">()</span>
<span class="o">{</span>
    <span class="c1">// 从栈顶删除元素</span>
    <span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="n">a</span><span class="o">[--</span><span class="n">N</span><span class="o">];</span>
    <span class="n">a</span><span class="o">[</span><span class="n">N</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// 对象游离</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">N</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">N</span> <span class="o">===</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">/</span><span class="mi">4</span><span class="o">)</span>  <span class="n">resize</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span> <span class="o">*</span> <span class="mi">2</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">item</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h2>对象游离<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>java的垃圾收集策略是回收所有无法被访问的对象的内存，在我们对pop()的实现中，被弹出的元素
的引用仍然存在于数组中，这个元素实际上已经是一个孤儿了—– 它永远不会再被访问了，但java的垃圾收集器没法
知道这一点，除非引用被覆盖，避免游离很容易，只需将被弹出的数组元素的值设为null即可。</p>
</div>
<p>轨迹:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--------------------------------------------------------------------------------------</span>
 <span class="n">push</span><span class="p">()</span>   <span class="n">pop</span><span class="p">()</span>  <span class="n">N</span>   <span class="n">a</span><span class="o">.</span><span class="n">length</span>    <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>  <span class="n">a</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>   <span class="n">a</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
<span class="o">--------------------------------------------------------------------------------------</span>
                 <span class="mi">0</span>     <span class="mi">1</span>         <span class="n">null</span>
  <span class="n">to</span>             <span class="mi">1</span>     <span class="mi">1</span>         <span class="n">to</span>
  <span class="n">be</span>             <span class="mi">2</span>     <span class="mi">2</span>         <span class="n">to</span>      <span class="n">be</span>
  <span class="ow">or</span>             <span class="mi">3</span>     <span class="mi">4</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="n">nulll</span>
  <span class="ow">not</span>            <span class="mi">4</span>     <span class="mi">4</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="ow">not</span>
  <span class="n">to</span>             <span class="mi">5</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="ow">not</span>    <span class="n">to</span>    <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="n">to</span>    <span class="mi">4</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="ow">not</span>    <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="n">be</span>             <span class="mi">5</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="ow">not</span>    <span class="n">be</span>    <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="n">be</span>    <span class="mi">4</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="ow">not</span>    <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="ow">not</span>   <span class="mi">3</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="n">null</span>   <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="n">that</span>           <span class="mi">4</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="n">that</span>   <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="n">that</span>  <span class="mi">3</span>     <span class="mi">8</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="ow">or</span>     <span class="n">null</span>   <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="ow">or</span>    <span class="mi">2</span>     <span class="mi">4</span>         <span class="n">to</span>      <span class="n">be</span>    <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="o">-</span>        <span class="n">be</span>    <span class="mi">1</span>     <span class="mi">2</span>         <span class="n">to</span>      <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>  <span class="n">null</span>   <span class="n">null</span>   <span class="n">null</span>
  <span class="ow">is</span>             <span class="mi">2</span>     <span class="mi">2</span>         <span class="n">to</span>      <span class="ow">is</span>
<span class="o">--------------------------------------------------------------------------------------</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h2>迭代<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>集合数据类型的基本操作之一是，能够使用java的foreach语句通过迭代遍历并处理集合中的每一个元素。</p>
<p>打印出一个字符串集合中的所有元素的用例</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">collection</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stack</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
<span class="o">...</span>
<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">s</span> <span class="o">:</span> <span class="n">collection</span><span class="o">)</span>
    <span class="n">StdOut</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">...</span>
</pre></div>
</div>
<p>任意可迭代的集合数据类型中我们需要实现</p>
<ul class="simple">
<li><p>集合数据类型必须实现一个iterator()方法并返回一个Iterator对象</p></li>
<li><p>Iterator类必须包含两个方法：<code class="docutils literal notranslate"><span class="pre">hasNext()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">next()</span></code></p></li>
</ul>
<p>对应的接口（即java.lang.Iterable）</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Iterable</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
<span class="o">{</span>
     <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>然后在类中添加一个iterator()并返回一个迭代器Iterator&lt;Item&gt;,迭代器都是泛型的，
因此我们可以使用参数类型Item来帮助用例遍历它们指定的任意类型的对象。</p>
<p>我们将迭代器命名为``ReverseArrayIterator`` 并添加以下方法</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span>
<span class="o">{</span>
     <span class="k">return</span> <span class="k">new</span> <span class="n">ReverseArrayIterator</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>迭代器是什么？它是实现了hasNext()和next()方法的类的对象，即java.util.Iterator</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
<span class="o">{</span>
     <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
     <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>下压栈—动态调整数组大小的实现</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResizingArrayStack</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
<span class="o">{</span>
     <span class="kd">private</span> <span class="n">Item</span><span class="o">[]</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">Item</span><span class="o">[])</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>

     <span class="kd">private</span> <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
     <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isEmpty</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
     <span class="kd">public</span> <span class="kt">int</span> <span class="nf">size</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">N</span><span class="o">;</span> <span class="o">}</span>

     <span class="kd">private</span> <span class="kt">void</span> <span class="nf">resize</span><span class="o">(</span><span class="kt">int</span> <span class="n">max</span><span class="o">)</span>
     <span class="o">{</span>
         <span class="c1">// 将栈移动到一个大小为max的数组</span>
         <span class="n">Item</span><span class="o">[]</span> <span class="n">temp</span> <span class="o">=</span> <span class="o">(</span><span class="n">Item</span><span class="o">[])</span> <span class="k">new</span> <span class="n">Object</span><span class="o">[</span><span class="n">max</span><span class="o">];</span>
         <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
             <span class="n">temp</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">a</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
         <span class="n">a</span> <span class="o">=</span> <span class="n">temp</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">push</span><span class="o">(</span><span class="n">Item</span> <span class="n">item</span><span class="o">)</span>
     <span class="o">{</span>
         <span class="c1">// 将元素添加到栈</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">N</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="n">resize</span><span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
         <span class="n">d</span><span class="o">[</span><span class="n">N</span><span class="o">++]</span> <span class="o">=</span> <span class="n">item</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="kd">public</span> <span class="n">Item</span> <span class="nf">pop</span><span class="o">()</span>
     <span class="o">{</span>
         <span class="c1">// 从栈顶删除</span>
         <span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="n">a</span><span class="o">[--</span><span class="n">N</span><span class="o">];</span>
         <span class="n">a</span><span class="o">[</span><span class="n">N</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
         <span class="k">if</span> <span class="o">(</span><span class="n">N</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">N</span> <span class="o">==</span> <span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">/</span><span class="mi">4</span><span class="o">)</span> <span class="n">resize</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">length</span><span class="o">/</span><span class="mi">2</span><span class="o">);</span>
         <span class="k">return</span> <span class="n">item</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span>
     <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="n">ReverseArrayIterator</span><span class="o">();</span>
     <span class="o">}</span>

     <span class="kd">private</span> <span class="kd">class</span> <span class="nc">ReverseArrayIterator</span> <span class="kd">implements</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span>
     <span class="o">{</span>
         <span class="c1">// 支持后进先出的迭代</span>
         <span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">N</span><span class="o">;</span>
         <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">;</span> <span class="o">}</span>
         <span class="kd">public</span> <span class="kt">void</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">a</span><span class="o">[--</span><span class="n">i</span><span class="o">];</span> <span class="o">}</span>
         <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{}</span>
     <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>这份范型的可迭代的Stack API的实现是所有集合类抽象数据类型实现的模版</p>
</div>
<div class="section" id="id10">
<h2>链表<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>这是构造非java 直接支持的数据结构的第一个例子。我们的实现将成为更加复杂的数据结构的构造代码的模板</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>链表是一种递归的数据结构，它或者为空（null），或者是指向一个结点(node) 的引用，该结点
含有一个泛型的元素和一个指向另一条链表的引用</p>
</div>
</div>
<div class="section" id="id11">
<h2>结点记录<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<p>用一个嵌套类来定义结点的抽象数据类型</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">private</span> <span class="kd">class</span> <span class="nc">Node</span>
<span class="o">{</span>
     <span class="n">Item</span> <span class="n">item</span><span class="o">;</span>
     <span class="n">Node</span> <span class="n">next</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Node对象包含两个实例变量，类型分别为Item（参数类型）和Node</p>
<p>为什么用private 表示， 因为不是为用例准备的。</p>
</div>
<div class="section" id="id12">
<h2>构造链表<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<p>根据递归定义，我们只需要一个Node类型的变量就能表示一条链表。只要保证它的值是null或者指向另一个Node对象且该对象的next
域指向了另一条链表即可。</p>
<p><code class="docutils literal notranslate"><span class="pre">Node</span> <span class="pre">first</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">Node();</span></code>
<code class="docutils literal notranslate"><span class="pre">Node</span> <span class="pre">second</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">Node();</span></code>
<code class="docutils literal notranslate"><span class="pre">Node</span> <span class="pre">third</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">Node();</span></code></p>
<p>将每个结点的item域设为所需的值，</p>
<p><code class="docutils literal notranslate"><span class="pre">first.item</span> <span class="pre">=</span> <span class="pre">&quot;to&quot;;</span></code>
<code class="docutils literal notranslate"><span class="pre">second.item</span> <span class="pre">=</span> <span class="pre">&quot;be&quot;;</span></code>
<code class="docutils literal notranslate"><span class="pre">third.item</span> <span class="pre">=</span> <span class="pre">&quot;or&quot;;</span></code></p>
<p>然后设置next的域来构造列表</p>
<p><code class="docutils literal notranslate"><span class="pre">first.next</span> <span class="pre">=</span> <span class="pre">second;</span></code>
<code class="docutils literal notranslate"><span class="pre">second.next</span> <span class="pre">=</span> <span class="pre">third;</span></code></p>
<img alt="../../_images/node.jpg" src="../../_images/node.jpg" />
</div>
<div class="section" id="id13">
<h2>在表头插入结点<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/addnewnodetohead.jpg" src="../../_images/addnewnodetohead.jpg" />
</div>
<div class="section" id="id14">
<h2>从表头删除结点<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/removenodehead.jpg" src="../../_images/removenodehead.jpg" />
<p>因为一旦改变了first的值，就再也无法访问它曾经指向的结点了，曾经的结点变成了 <strong>孤儿</strong>, java会回收它所占用的内存。</p>
</div>
<div class="section" id="id15">
<h2>在表尾插入结点<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/addnodetoend.jpg" src="../../_images/addnodetoend.jpg" />
</div>
<div class="section" id="id16">
<h2>其他位置的插入和删除操作<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p>我们删除链表的尾结点，last列表帮不上忙，因为我们需要链表尾结点的前一个结点中的链接值改为null,目前唯一的方法是遍历链表
并找出指向last的结点。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>其实看作将链表分成了2个链表 中间插入实际上是前链表的尾添加，后一个链表的头添加</p>
</div>
</div>
<div class="section" id="id17">
<h2>遍历<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="o">(</span><span class="n">Node</span> <span class="n">x</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span> <span class="n">x</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="na">next</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">x</span><span class="o">.</span><span class="na">item</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>

  <div class="section">
  
    


<div class="section">
  <span style="float: left;">
  
  </span>
  <span>&nbsp;</span>
  <span style="float: right;">
  
  Next: 
  <a href="../../javaTech/BaseStructJava/">
    java核心技术（一） 基本数据类型
    
  </a>
  
  </span>
</div>

  
  
  </div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../">胖虎的技术栈</a></h1>









  
  
  <h2>
  
  
    26 二月 2020
  
  </h2>

  <ul>
    

  
  <li id="author"><span>Author:</span>
    
      
      <a href="../../blog/author/胖虎/">胖虎</a>
      
    </li>
  

  

  

  
  <li id="category"><span>Category:</span>
    
      
      <a href="../../blog/category/算法/">算法</a>,
      
    
      
      <a href="../../blog/category/基础/">基础</a>,
      
    
      
      <a href="../../blog/category/java/">java</a>
      
    </li>
  

  
  <li id="tags"><span>Tags:
      </span>
    
      
      <a href="../../blog/tag/算法/">算法</a>
      
    
      
      <a href="../../blog/tag/java/">java</a>
      
    
      
      <a href="../../blog/tag/基础/">基础</a>
      
    </li>
  
  
  </ul>


<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/">胖虎</a></li>
</ul>


  <h3><a href="../../blog/">Recent Posts</a></h3>
  <ul>
    
    
      <li><a href="../algoSort/">04 七月 - 初级排序算法</a></li>
    
      <li><a href="../../base/throws/">14 四月 - 使用异常的技巧</a></li>
    
      <li><a href="../../base/oop/">22 三月 - oop设计技巧</a></li>
    
      <li><a href="../../javaTech/Control/">10 三月 - java核心技术（二） 流程控制</a></li>
    
      <li><a href="../../javaTech/BaseStructJava/">04 三月 - java核心技术（一） 基本数据类型</a></li>
    
  </ul>

  <h3><a href="../../blog/tag/">Tags</a></h3>
  <style type="text/css">
    ul.ablog-cloud {list-style: none; overflow: auto;}
    ul.ablog-cloud li {float: left; height: 20pt; line-height: 18pt; margin-right: 5px;}
    ul.ablog-cloud a {text-decoration: none; vertical-align: middle;}
    li.ablog-cloud-1{font-size: 80%;}
    li.ablog-cloud-2{font-size: 95%;}
    li.ablog-cloud-3{font-size: 110%;}
    li.ablog-cloud-4{font-size: 125%;}
    li.ablog-cloud-5{font-size: 140%;}
  </style>
  <ul class="ablog-cloud">
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/exception/">Exception</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/base/">base</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/java/">java</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/oop/">oop</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-5">
        <a href="../../blog/tag/基础/">基础</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/流程控制位运算/">流程控制，位运算</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-2">
        <a href="../../blog/tag/算法/">算法</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/类/">类</a></li>
      
    
      
      <li class="ablog-cloud ablog-cloud-1">
        <a href="../../blog/tag/面向对象/">面向对象</a></li>
      
    
  </ul>

  <h3><a href="../../blog/category/">Categories</a></h3>
  <ul>
  
    
    <li><a href="../../blog/category/base/">base (1)</a></li>
    
  
    
    <li><a href="../../blog/category/java/">java (4)</a></li>
    
  
    
    <li><a href="../../blog/category/oop/">oop (1)</a></li>
    
  
    
    <li><a href="../../blog/category/基础/">基础 (5)</a></li>
    
  
    
    <li><a href="../../blog/category/异常/">异常 (1)</a></li>
    
  
    
    <li><a href="../../blog/category/算法/">算法 (2)</a></li>
    
  
    
    <li><a href="../../blog/category/类/">类 (1)</a></li>
    
  
    
    <li><a href="../../blog/category/面向对象/">面向对象 (2)</a></li>
    
  
  </ul>

  <h3><a href="../../blog/archive/">Archives</a></h3>
  <ul>
  
    
    <li><a href="../../blog/2020/">2020 (6)</a></li>
    
  
  </ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, 胖虎.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/algorithms/bag_queue_stack.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>